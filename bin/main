#!/usr/bin/env ruby
puts 'Welcome to Tic-Tac-Toe!'
puts "**********************\n\n"

print 'Enter player one name '
player_one = gets.chomp.capitalize
puts "#{player_one} is X"

print 'Enter player two name '
player_two = gets.chomp.capitalize
puts "#{player_two} is O"
sleep(1)
system('clear')

turn = 1

def display_board
  puts '----------------'
  puts '| A1 | A2 | A3 |'
  puts '----------------'
  puts '| B1 | B2 | B3 |'
  puts '----------------'
  puts '| C1 | C2 | C3 |'
  puts '----------------'
end

def valid?
  [true, false].sample
end

while turn < 9
  current_player = turn.odd? ? player_one : player_two
  display_board
  puts "\nIt's #{current_player}'s turn, make a move (e.g A1, C2)"
  move = gets.chomp.downcase

  if valid?
    puts "#{current_player} moved to cell #{move}"
    sleep(1)
    turn += 1
    system('clear')
  else
    system('clear')
    puts "Invalid move, try again. Valids are e.g A1, C2\n"
  end

  next unless turn == 9

  system('clear')
  display_board
  if %w[win draw].sample == 'win'
    puts "\n#{[player_one, player_two].sample} has won\n\n"
  else
    puts 'Game was a tie'
  end
  puts "\nPress `S` to play again, any key to quit"
  response = gets.chomp.downcase
  puts response == 's' ? 'You have chosen to play again' : 'Thank you for playing'
end
